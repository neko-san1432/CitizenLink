<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <title>HR Dashboard - CitizenLink</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/toast.css">
    <link rel="stylesheet" href="../../css/components/clock.css">
    <link rel="stylesheet" href="../../css/app.css">
    <link rel="stylesheet" href="../../css/pages/hr-dashboard.css">
</head>
<body>
    <div id="dashboard-clock" class="dashboard-clock" aria-live="polite"></div>
    <div class="app-container">
        <div class="header-container"></div>
        <div id="sidebar" class="collapsible"></div>
        
        <div id="app" class="collapsible hr-dashboard">
            <h1>HR Dashboard</h1>
            <p style="color: #7f8c8d; margin-bottom: 30px;">Manage staff roles, promotions, demotions, and department assignments</p>

            <!-- Statistics -->
            <div class="stats-grid" id="stats-grid">
                <div class="stat-card">
                    <div style="color: #7f8c8d; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;">Total Officers</div>
                    <div style="font-size: 2.5rem; font-weight: bold; color: #2c3e50; margin: 10px 0;" id="stat-officers">0</div>
                </div>
                <div class="stat-card">
                    <div style="color: #7f8c8d; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;">Total Admins</div>
                    <div style="font-size: 2.5rem; font-weight: bold; color: #2c3e50; margin: 10px 0;" id="stat-admins">0</div>
                </div>
                <div class="stat-card">
                    <div style="color: #7f8c8d; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;">Promotions This Month</div>
                    <div style="font-size: 2.5rem; font-weight: bold; color: #2c3e50; margin: 10px 0;" id="stat-promotions">0</div>
                </div>
                <div class="stat-card">
                    <div style="color: #7f8c8d; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px;">Demotions This Month</div>
                    <div style="font-size: 2.5rem; font-weight: bold; color: #2c3e50; margin: 10px 0;" id="stat-demotions">0</div>
                </div>
            </div>

            <!-- Actions Section -->
            <div class="section-header">
                <h2 class="section-title">HR Actions</h2>
            </div>

            <div class="actions-grid">
                <!-- Promote to Officer -->
                <div class="action-card">
                    <h3>üéñÔ∏è Promote to LGU Officer</h3>
                    <form id="promote-officer-form">
                        <div class="form-group">
                            <label>User ID / Email</label>
                            <input type="text" id="promote-officer-user" placeholder="Enter user ID or email" required>
                            <div class="help-text">User must be a citizen</div>
                        </div>
                        <div class="form-group">
                            <label>Department</label>
                            <input type="text" id="promote-officer-dept" placeholder="e.g., engineering" required>
                        </div>
                        <div class="form-group">
                            <label>Reason (Optional)</label>
                            <textarea id="promote-officer-reason" placeholder="Enter reason for promotion"></textarea>
                        </div>
                        <button type="submit" class="btn btn-success">Promote to Officer</button>
                    </form>
                </div>

                <!-- Promote to Admin -->
                <div class="action-card">
                    <h3>üëî Promote to LGU Admin</h3>
                    <form id="promote-admin-form">
                        <div class="form-group">
                            <label>User ID / Email</label>
                            <input type="text" id="promote-admin-user" placeholder="Enter user ID or email" required>
                            <div class="help-text">User must be an LGU Officer</div>
                        </div>
                        <div class="form-group">
                            <label>Department</label>
                            <input type="text" id="promote-admin-dept" placeholder="e.g., engineering">
                        </div>
                        <div class="form-group">
                            <label>Reason (Optional)</label>
                            <textarea id="promote-admin-reason" placeholder="Enter reason for promotion"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Promote to Admin</button>
                    </form>
                </div>

                <!-- Demote to Officer -->
                <div class="action-card">
                    <h3>‚¨áÔ∏è Demote Admin to Officer</h3>
                    <form id="demote-officer-form">
                        <div class="form-group">
                            <label>User ID / Email</label>
                            <input type="text" id="demote-officer-user" placeholder="Enter user ID or email" required>
                            <div class="help-text">User must be an LGU Admin</div>
                        </div>
                        <div class="form-group">
                            <label>Reason</label>
                            <textarea id="demote-officer-reason" placeholder="Enter reason for demotion" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-warning">Demote to Officer</button>
                    </form>
                </div>

                <!-- Strip Titles -->
                <div class="action-card">
                    <h3>üö´ Strip All Titles</h3>
                    <form id="strip-titles-form">
                        <div class="form-group">
                            <label>User ID / Email</label>
                            <input type="text" id="strip-titles-user" placeholder="Enter user ID or email" required>
                            <div class="help-text">Revert user to citizen status</div>
                        </div>
                        <div class="form-group">
                            <label>Reason (Required)</label>
                            <textarea id="strip-titles-reason" placeholder="Enter detailed reason for stripping titles" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-danger">Strip Titles</button>
                    </form>
                </div>

                <!-- Assign Department -->
                <div class="action-card">
                    <h3>üè¢ Assign to Department</h3>
                    <form id="assign-dept-form">
                        <div class="form-group">
                            <label>User ID / Email</label>
                            <input type="text" id="assign-dept-user" placeholder="Enter user ID or email" required>
                        </div>
                        <div class="form-group">
                            <label>Department ID</label>
                            <input type="text" id="assign-dept-id" placeholder="e.g., engineering" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Assign Department</button>
                    </form>
                </div>

                <!-- View Role History -->
                <div class="action-card">
                    <h3>üìú View Role History</h3>
                    <form id="role-history-form">
                        <div class="form-group">
                            <label>User ID / Email</label>
                            <input type="text" id="role-history-user" placeholder="Enter user ID or email" required>
                        </div>
                        <button type="submit" class="btn btn-primary">View History</button>
                    </form>
                    <div id="role-history-results" style="margin-top: 20px;"></div>
                </div>
            </div>

            <!-- User Management -->
            <div class="section-header">
                <h2 class="section-title">User Management</h2>
            </div>
            <div class="user-grid">
                <!-- Search & List -->
                <div class="user-panel">
                    <h3 style="margin-top:0;">Search Users</h3>
                    <div class="form-group">
                        <label>Search by name or email</label>
                        <input type="text" id="user-search-input" placeholder="Type a name or email...">
                    </div>
                    <div class="form-group">
                        <label>Barangay</label>
                        <input type="text" id="user-filter-barangay" placeholder="e.g., Barangay 123">
                    </div>
                    <div class="form-group">
                        <button id="user-search-btn" class="btn btn-primary">Search</button>
                    </div>
                    <div id="user-list" class="user-list"></div>
                </div>

                <!-- Details -->
                <div class="user-panel">
                    <h3 style="margin-top:0;">User Details</h3>
                    <div id="user-details" class="user-details">
                        <p style="color:#7f8c8d;">Select a user to view details</p>
                    </div>
                    <div style="margin-top:20px;">
                        <h4>Complaints</h4>
                        <div id="user-complaints"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast-container" class="toast-container"></div>

    <script type="module" src="../../js/components/header.js"></script>
    <script type="module" src="../../js/components/sidebar.js"></script>
    <script type="module" src="../../js/auth/authChecker.js"></script>
    <script type="module" src="../../js/auth/roleToggle.js"></script>
    <script type="module" src="../../js/components/clock.js"></script>
    <script type="module" src="../../js/hr/dashboard.js"></script>
</body>
</html>
