<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <title>Assigned Tasks - CitizenLink</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ‘·</text></svg>">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/toast.css">
    <link rel="stylesheet" href="/css/components/sidebar.css">
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/css/header-redesign.css">
    <link rel="stylesheet" href="/css/pages/lgu-officer-tasks.css">
    <link rel="stylesheet" href="/css/components/barangay-prioritization.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header id="header"></header>

        <!-- Sidebar -->
        <div id="sidebar" class="collapsible"></div>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <div class="page-header">
                    <h1>My Assigned Tasks</h1>
                    <p>Manage and resolve complaints assigned to you</p>
                </div>

                <!-- Side-by-side Layout -->
                <div class="tasks-layout">
                    <!-- Left Column: Tasks Content -->
                    <div class="tasks-main">
                        <!-- Filters -->
                <div class="filters-section">
                    <div class="filter-group">
                        <label for="status-filter">Status:</label>
                        <select id="status-filter" class="filter-select">
                            <option value="">All Status</option>
                            <option value="assigned">Assigned</option>
                            <option value="in_progress">In Progress</option>
                            <option value="completed">Completed</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="priority-filter">Priority:</label>
                        <select id="priority-filter" class="filter-select">
                            <option value="">All Priority</option>
                            <option value="urgent">Urgent</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="urgency-filter">Urgency:</label>
                        <select id="urgency-filter" class="filter-select">
                            <option value="">All Urgency</option>
                            <option value="urgent">Urgent Only</option>
                            <option value="high">Urgent & High</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="prioritization-filter">Prioritization:</label>
                        <select id="prioritization-filter" class="filter-select">
                            <option value="">Default Order</option>
                            <option value="desc">Highest Priority First</option>
                            <option value="asc">Lowest Priority First</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="search-input">Search:</label>
                        <input type="text" id="search-input" class="filter-input" placeholder="Search tasks...">
                    </div>
                </div>

                <!-- Stats -->
                <div class="stats-section">
                    <div class="stat-card">
                        <div class="stat-number" id="total-tasks">0</div>
                        <div class="stat-label">Total Tasks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pending-tasks">0</div>
                        <div class="stat-label">Pending</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="in-progress-tasks">0</div>
                        <div class="stat-label">In Progress</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completed-tasks">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                </div>

                <!-- Loading State -->
                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>Loading tasks...</p>
                </div>

                <!-- Empty State -->
                <div id="empty-state" class="empty-state" style="display: none;">
                    <h2>No tasks found</h2>
                    <p>No tasks match your current filters.</p>
                </div>

                <!-- Tasks List -->
                <div id="tasks-list" class="tasks-list" style="display: none;">
                    <!-- Tasks will be populated here -->
                </div>

                        <!-- Pagination -->
                        <div id="pagination" class="pagination" style="display: none;">
                            <!-- Pagination will be populated here -->
                        </div>
                    </div>

                    <!-- Right Column: Barangay Prioritization -->
                    <div class="tasks-sidebar">
                        <div class="barangay-prioritization-section">
                            <div id="barangay-prioritization-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer id="footer"></footer>
    </div>

    <!-- Resolution Modal -->
    <div id="resolution-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Mark as Resolved</h3>
                <button class="modal-close" type="button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="resolution-form">
                    <input type="hidden" id="resolution-complaint-id">
                    
                    <div class="form-group">
                        <label for="resolution-notes">Resolution Notes *</label>
                        <textarea id="resolution-notes" class="form-textarea" rows="6" 
                                  placeholder="Please provide detailed notes about how the complaint was resolved..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="resolution-evidence">Evidence/Attachments (Optional)</label>
                        <input type="file" id="resolution-evidence" class="form-input" multiple 
                               accept="image/*,.pdf,.doc,.docx">
                        <small class="form-help">Upload photos, documents, or other evidence of resolution</small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-resolution">Cancel</button>
                <button type="button" class="btn btn-success" id="confirm-resolution">Mark as Resolved</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="/js/components/header.js"></script>
    <script type="module" src="/js/components/sidebar.js"></script>
    <script type="module" src="/js/auth/authChecker.js"></script>
    <script type="module" src="/js/auth/roleToggle.js"></script>
    <script type="module" src="/js/components/toast.js"></script>
    <script type="module" src="/js/lgu-officer/assigned-tasks.js"></script>
</body>
</html>
