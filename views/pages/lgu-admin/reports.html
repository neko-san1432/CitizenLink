<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reports & Analytics</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/toast.css" />
    <link rel="stylesheet" href="/css/components/sidebar.css" />
    <link rel="stylesheet" href="/css/app.css" />
    <link rel="stylesheet" href="/css/components/clock.css" />
    <link rel="stylesheet" href="/css/header-redesign.css" />
    <link rel="stylesheet" href="/css/pages/dashboard-common.css?v=1.2" />
    <link rel="stylesheet" href="/css/viewport-fix.css" />
  </head>
  <body>
    <div id="dashboard-clock" class="dashboard-clock" aria-live="polite"></div>
    <div class="app-container">
      <div class="header-container"></div>
      <div id="sidebar" class="collapsible"></div>
      <div id="app" class="collapsible lgu-admin-dashboard">
        <!-- Header -->
        <div class="dashboard-header-section flex justify-between items-end">
          <div>
            <h1 class="text-2xl font-bold text-gray-800">
              Reports & Analytics
            </h1>
            <p class="text-gray-600">
              Generate insights and complaints summaries.
            </p>
          </div>
          <button
            id="btn-print"
            class="btn-secondary flex items-center gap-2 p-2 rounded border border-gray-300 hover:bg-gray-50"
          >
            <span>üñ®Ô∏è Print Report</span>
          </button>
        </div>

        <!-- Filter Bar -->
        <div
          class="glass-panel p-4 mx-6 mt-4 mb-6 flex flex-wrap gap-4 items-end bg-white rounded-xl shadow-sm border border-gray-100"
        >
          <div class="flex flex-col gap-1">
            <label
              class="text-xs text-gray-500 font-semibold"
              for="filter-date-from"
              >Date From</label
            >
            <input
              type="date"
              id="filter-date-from"
              class="input p-2 rounded border border-gray-300 text-sm"
            />
          </div>
          <div class="flex flex-col gap-1">
            <label
              class="text-xs text-gray-500 font-semibold"
              for="filter-date-to"
              >Date To</label
            >
            <input
              type="date"
              id="filter-date-to"
              class="input p-2 rounded border border-gray-300 text-sm"
            />
          </div>
          <div
            class="flex flex-col gap-1"
            id="filter-dept-container"
            style="display: none"
          >
            <label
              class="text-xs text-gray-500 font-semibold"
              for="filter-department"
              >Department</label
            >
            <select
              id="filter-department"
              class="input p-2 rounded border border-gray-300 text-sm"
            >
              <option value="">All Departments</option>
              <!-- Populated by JS -->
            </select>
          </div>
          <button id="btn-generate" class="btn-primary" style="height: 38px">
            Generate
          </button>
        </div>

        <!-- Content Grid -->
        <div class="dashboard-content gap-6 p-6">
          <!-- Summary Cards -->
          <div
            class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"
            id="summary-cards"
          >
            <!-- Cards injected here -->
          </div>

          <!-- Charts -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div
              class="bg-white p-4 rounded-xl shadow-sm border border-gray-100"
            >
              <h3 class="font-semibold mb-4 text-gray-800">
                Complaints by Category
              </h3>
              <div style="height: 300px; position: relative">
                <canvas id="chart-category"></canvas>
              </div>
            </div>
            <div
              class="bg-white p-4 rounded-xl shadow-sm border border-gray-100"
            >
              <h3 class="font-semibold mb-4 text-gray-800">
                Status Distribution
              </h3>
              <div style="height: 300px; position: relative">
                <canvas id="chart-status"></canvas>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 gap-6 mb-6">
            <div
              class="bg-white p-4 rounded-xl shadow-sm border border-gray-100"
            >
              <h3 class="font-semibold mb-4 text-gray-800">
                Submission Trends
              </h3>
              <div style="height: 300px; position: relative">
                <canvas id="chart-trend"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="toast-container" class="toast-container"></div>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="/js/lib/supabase-boot.js"></script>
    <script type="module" src="../../js/components/toast.js"></script>
    <script type="module" src="../../js/components/header.js"></script>
    <script type="module" src="../../js/components/sidebar.js"></script>
    <script type="module" src="../../js/auth/authChecker.js"></script>
    <script type="module" src="../../js/pages/lgu-admin/reports.js"></script>
  </body>
</html>
