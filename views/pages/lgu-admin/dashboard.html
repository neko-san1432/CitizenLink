<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />
    <title>Dashboard</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/toast.css" />
    <link rel="stylesheet" href="/css/components/sidebar.css" />
    <link rel="stylesheet" href="/css/app.css" />
    <link rel="stylesheet" href="/css/components/clock.css" />
    <link rel="stylesheet" href="/css/header-redesign.css" />
    <link rel="stylesheet" href="/css/pages/dashboard-common.css?v=1.2" />
    <link rel="stylesheet" href="/css/viewport-fix.css" />
  </head>
  <body>
    <div id="dashboard-clock" class="dashboard-clock" aria-live="polite"></div>
    <div class="app-container">
      <div class="header-container"></div>
      <div id="sidebar" class="collapsible"></div>
      <div id="app" class="collapsible lgu-admin-dashboard">
        <!-- Welcome Section -->
        <div class="dashboard-header-section">
          <h1 class="text-2xl font-bold text-gray-800">Department Overview</h1>
          <p class="text-gray-600">
            Real-time insights and operational status.
          </p>
        </div>

        <!-- Main Content Grid -->
        <div class="dashboard-content gap-6 p-6">
          <!-- Stats Row -->
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"
          >
            <!-- Total Active -->
            <div
              class="stat-card bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between"
            >
              <div>
                <p class="text-sm text-gray-500 font-medium">Total Active</p>
                <h3
                  class="text-2xl font-bold text-gray-800"
                  id="stat-total-active"
                >
                  -
                </h3>
              </div>
              <div class="p-3 bg-blue-50 text-blue-600 rounded-lg">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                  />
                </svg>
              </div>
            </div>

            <!-- Unassigned -->
            <div
              class="stat-card bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between"
            >
              <div>
                <p class="text-sm text-gray-500 font-medium">Unassigned</p>
                <h3
                  class="text-2xl font-bold text-red-600"
                  id="stat-unassigned"
                >
                  -
                </h3>
              </div>
              <div class="p-3 bg-red-50 text-red-600 rounded-lg">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
            </div>

            <!-- Urgent Priority -->
            <div
              class="stat-card bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between"
            >
              <div>
                <p class="text-sm text-gray-500 font-medium">Urgent Priority</p>
                <h3 class="text-2xl font-bold text-orange-600" id="stat-urgent">
                  -
                </h3>
              </div>
              <div class="p-3 bg-orange-50 text-orange-600 rounded-lg">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 10V3L4 14h7v7l9-11h-7z"
                  />
                </svg>
              </div>
            </div>

            <!-- High Priority -->
            <div
              class="stat-card bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between"
            >
              <div>
                <p class="text-sm text-gray-500 font-medium">High Priority</p>
                <h3 class="text-2xl font-bold text-yellow-600" id="stat-high">
                  -
                </h3>
              </div>
              <div class="p-3 bg-yellow-50 text-yellow-600 rounded-lg">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 10V3L4 14h7v7l9-11h-7z"
                  />
                </svg>
              </div>
            </div>
          </div>

          <!-- Charts Row -->
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"
          >
            <!-- Trend Chart -->
            <div
              class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 col-span-1 md:col-span-2 lg:col-span-3"
            >
              <h3 class="text-lg font-semibold text-gray-800 mb-4">
                Complaint Submission Trend (7 Days)
              </h3>
              <div style="height: 300px; position: relative">
                <canvas id="trendChart"></canvas>
              </div>
            </div>

            <!-- Distribution Chart -->
            <div
              class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 col-span-1"
            >
              <h3 class="text-lg font-semibold text-gray-800 mb-4">
                Priority Distribution
              </h3>
              <div style="height: 300px; position: relative">
                <canvas id="distributionChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Action Lists Row -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Recent Unassigned -->
            <div
              class="bg-white p-4 rounded-xl shadow-sm border border-gray-100"
            >
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-800">
                  Recent Unassigned Data
                </h3>
                <a
                  href="/lgu-admin/assignments"
                  class="text-sm text-blue-600 hover:text-blue-800 font-medium"
                  >View All</a
                >
              </div>
              <div id="recent-unassigned-list" class="space-y-3">
                <!-- Loading State -->
                <div class="animate-pulse space-y-3">
                  <div class="h-16 bg-gray-100 rounded-lg"></div>
                  <div class="h-16 bg-gray-100 rounded-lg"></div>
                  <div class="h-16 bg-gray-100 rounded-lg"></div>
                </div>
              </div>
            </div>

            <!-- Quick Actions Place holder -->
            <div
              class="bg-white p-4 rounded-xl shadow-sm border border-gray-100"
            >
              <h3 class="text-lg font-semibold text-gray-800 mb-4">
                Quick Actions
              </h3>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <button
                  id="btn-quick-assignments"
                  class="p-4 bg-gray-50 hover:bg-gray-100 rounded-xl text-left transition-colors border border-gray-200 group"
                >
                  <div
                    class="w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center mb-3 group-hover:bg-blue-200 transition-colors"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-6 w-6"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
                      />
                    </svg>
                  </div>
                  <h4 class="font-medium text-gray-900">Manage Assignments</h4>
                  <p class="text-sm text-gray-500 mt-1">
                    Assign or reassign complaints
                  </p>
                </button>

                <button
                  id="btn-quick-heatmap"
                  class="p-4 bg-gray-50 hover:bg-gray-100 rounded-xl text-left transition-colors border border-gray-200 group"
                >
                  <div
                    class="w-10 h-10 bg-purple-100 text-purple-600 rounded-lg flex items-center justify-center mb-3 group-hover:bg-purple-200 transition-colors"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-6 w-6"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"
                      />
                    </svg>
                  </div>
                  <h4 class="font-medium text-gray-900">View Heatmap</h4>
                  <p class="text-sm text-gray-500 mt-1">Geospatial analysis</p>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="toast-container" class="toast-container"></div>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="/js/lib/supabase-boot.js"></script>
    <script type="module" src="../../js/components/toast.js"></script>
    <script type="module" src="../../js/components/header.js"></script>
    <script type="module" src="../../js/components/sidebar.js"></script>
    <script type="module" src="../../js/auth/authChecker.js"></script>
    <script type="module" src="../../js/auth/roleToggle.js"></script>
    <script type="module" src="../../js/components/clock.js"></script>
    <script type="module" src="../../js/pages/lgu-admin/dashboard.js"></script>
  </body>
</html>
